# Routing

# WAN interface

/interface ethernet {
  set [ find default-name=sfp-sfpplus2 ] auto-negotiation=yes fec-mode=off
}

# Bridging configuration

:if ([:len [ /interface bridge find where name=bridge1 ] ] = 0) do={
  /interface bridge {
    settings set use-ip-firewall=no

    add name=bridge1

    port {
      remove [ find where bridge=bridge1 ]
      add bridge=bridge1 interface=spf28-1
      add bridge=bridge1 interface=sfp-sfpplus1
    }
  }
}

# IPv4 configuration

:if ([:len [ /ip address find where interface=bridge1 ] ] = 0) do={
  /ip address {
    add interface=bridge1 address=192.168.100.1/24
  }
}

# IPv6 configuration

  /ipv6 {
    settings set accept-router-advertisements=yes

    address {
      remove [ find where interface=bridge1 && !dynamic ]
      add interface=bridge1 from-pool=pool-ipv6 address=::1 advertise=yes
    }

    nd {
      set [ find default=yes ] interface=bridge1 \
        managed-address-configuration=no other-configuration=no \
        advertise-mac-address=yes advertise-dns=yes \
        dns=2001:4860:4860::8888,2001:4860:4860::8844
    }
  }
}


